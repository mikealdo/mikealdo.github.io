<!DOCTYPE html>
<html>
  <head>
    <title>TDD is impossible to use in legacy projects</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="60x60" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="72x72" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="76x76" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="114x114" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="120x120" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="144x144" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="152x152" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="180x180" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-32x32.png?v=wAAv6Wqe6l?v=1.0.0" sizes="32x32">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-194x194.png?v=wAAv6Wqe6l?v=1.0.0" sizes="194x194">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-96x96.png?v=wAAv6Wqe6l?v=1.0.0" sizes="96x96">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l?v=1.0.0" sizes="192x192">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-16x16.png?v=wAAv6Wqe6l?v=1.0.0" sizes="16x16">
    <link rel="manifest" href="//mikealdo.github.io/themes/uno-zen/assets/img/manifest.json?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="shortcut icon" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon.ico?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="msapplication-TileColor" content="#e74c3c">
    <meta name="msapplication-TileImage" content="//mikealdo.github.io/themes/uno-zen/assets/img/mstile-144x144.png?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="msapplication-config" content="//mikealdo.github.io/themes/uno-zen/assets/img/browserconfig.xml?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//mikealdo.github.io/themes/uno-zen/assets/css/uno-zen.css?v=1.0.0" />
    <link rel="canonical" href="https://mikealdo.github.io/2017/03/06/T-D-D-is-impossible-to-use-in-legacy-projects.html" />
    
    <meta property="og:site_name" content="Michal Davídek - blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="TDD is impossible to use in legacy projects" />
    <meta property="og:description" content="It seems obvious that Test-driven development (TDD) is in the majority (if not all) of cases the good thing. For greenfield projects, it’s true for hundred percent. But in reality, the programmer is often facing projects and applications with..." />
    <meta property="og:url" content="https://mikealdo.github.io/2017/03/06/T-D-D-is-impossible-to-use-in-legacy-projects.html" />
    <meta property="og:image" content="https://mikealdo.github.io/images//covers/tdd-is-impossible-to-use-in-legacy-projects.jpg" />
    <meta property="article:published_time" content="2017-03-05T23:00:00.000Z" />
    <meta property="article:modified_time" content="2017-03-01T20:19:22.983Z" />
    <meta property="article:tag" content="tdd" />
    <meta property="article:tag" content="unit tests" />
    <meta property="article:tag" content="legacy" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TDD is impossible to use in legacy projects" />
    <meta name="twitter:description" content="It seems obvious that Test-driven development (TDD) is in the majority (if not all) of cases the good thing. For greenfield projects, it’s true for hundred percent. But in reality, the programmer is often facing projects and applications with..." />
    <meta name="twitter:url" content="https://mikealdo.github.io/2017/03/06/T-D-D-is-impossible-to-use-in-legacy-projects.html" />
    <meta name="twitter:image:src" content="https://mikealdo.github.io/images//covers/tdd-is-impossible-to-use-in-legacy-projects.jpg" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Michal Davídek - blog",
    "author": {
        "@type": "Person",
        "name": "Michal Davídek",
        "image": "https://avatars1.githubusercontent.com/u/14245058?v=3",
        "url": "undefined/author/undefined",
        "sameAs": null
    },
    "headline": "TDD is impossible to use in legacy projects",
    "url": "https://mikealdo.github.io/2017/03/06/T-D-D-is-impossible-to-use-in-legacy-projects.html",
    "datePublished": "2017-03-05T23:00:00.000Z",
    "dateModified": "2017-03-01T20:19:22.983Z",
    "image": "https://mikealdo.github.io/images//covers/tdd-is-impossible-to-use-in-legacy-projects.jpg",
    "keywords": "tdd,  unit tests,  legacy",
    "description": "It seems obvious that Test-driven development (TDD) is in the majority (if not all) of cases the good thing. For greenfield projects, it’s true for hundred percent. But in reality, the programmer is often facing projects and applications with..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Michal Davídek - blog" href="https://mikealdo.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
  </head>
  <body class="post-template tag-tdd tag-unit-tests tag-legacy">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url(/images/background-cover.jpg) center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
          <a id="avatar-link" title="link to homepage for Michal Davídek - blog" href="https://mikealdo.github.io/#open">
            <img src="/images/michal-davidek.png" alt="Michal Davídek - blog avatar" class="profile avatar rounded hvr-buzz-out" />
            <h1 id="profile-title">Michal Davídek - blog</h1>
            <h3 id="profile-resume"></h3>
          </a>
    
          <hr class="divider long" />
          <p>Architecture, coding, open source.</p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://twitter.com/mikealdo007" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
                  <!-- Google Plus -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://plus.google.com/+MichalDavidekCZ" title="Google+ account">
                      <i class='icon icon-social-google-plus'></i>
                      <span class="label">Google-plus</span>
                    </a>
                  </li>
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/mikealdo" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.linkedin.com/in/davidekmichal" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
                  <!-- Email -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="mailto:mdavidek1@gmail.com" title="Email mdavidek1@gmail.com">
                      <i class='icon icon-mail'></i>
                      <span class="label">Email</span>
                    </a>
                  </li>
                    <!-- RSS -->
                    <li class="social item hvr-grow-rotate">
                        <a href="/rss" title="Subscribe to RSS">
                            <i class='icon icon-rss'></i>
                            <span class="label">RSS</span>
                        </a>
                    </li>
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-tdd tag-unit-tests tag-legacy">
    <header>
      <div class="post meta">
        <time datetime="06 Mar 2017">06 Mar 2017</time>
        <span class="post tags">in <a href="https://mikealdo.github.io/tag/tdd">tdd</a> <a href="https://mikealdo.github.io/tag/unit-tests"> unit tests</a> <a href="https://mikealdo.github.io/tag/legacy"> legacy</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'TDD is impossible to use in legacy projects'" href="https://twitter.com/intent/tweet?text=TDD%20is%20impossible%20to%20use%20in%20legacy%20projects%20%C2%BB&amp;hashtags=tdd, unit tests, legacy&amp;url=https://mikealdo.github.io/2017/03/06/T-D-D-is-impossible-to-use-in-legacy-projects.html">
        <img id="post-image" src=https://mikealdo.github.io/images//covers/tdd-is-impossible-to-use-in-legacy-projects.jpg alt="TDD is impossible to use in legacy projects">
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">TDD is impossible to use in legacy projects</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-tdd tag-unit-tests tag-legacy">
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>It seems obvious that Test-driven development (TDD) is in the majority (if not all) of cases the good thing. For greenfield projects, it’s true for hundred percent. But in reality, the programmer is often facing projects and applications with a significant amount of legacy code, not tested or documented parts which are hard to understand and almost impossible to maintain. And I was always curious whether I can use the TDD in such, let’s say, unfriendly conditions.</p>
</div>
<div class="paragraph">
<p>I am strongly convinced that it’s about us, developers, whether we are using technologies or methodologies which help us producing the better software. So, if I’m convinced that TDD is a good thing, I should use it independently on the situation of underlying project.</p>
</div>
<div class="paragraph">
<p>But, in the case of the project with large existing codebase which hasn&#8217;t been written in TDD style, is almost impossible to be working in TDD style in a reasonable manner. Here is my list of why.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_refactoring_must_come_before_tdd">Refactoring must come before TDD.</h3>
<div class="paragraph">
<p>The biggest problem which I am seeing is that for practicing TDD in such unfriendly conditions is need to refactor firstly. The code which will be enhanced or improved by the new code written with TDD is not always in shape for driving the new features by TDD. And not always is covered by unit tests. There are plenty of excellent sources how to deal with such refactorings, and I have read plenty books around that. And, even when I am pretty confident how to refactor, there exist plenty of situations (for example scope of needed refactoring, strong coupling to the other parts of software) where refactoring is not the option. Then, it’s not the option to use TDD.</p>
</div>
</div>
<div class="sect2">
<h3 id="_if_you_are_stand_alone_you_are_lost">If you are stand alone, you are lost.</h3>
<div class="paragraph">
<p>For having TDD feasible, it must be followed by every single developer in the team. Or, at least, by every single developer working on the component developed by TDD. If it’s not like that, it doesn’t matter how one developer produce the code if another one does not follow the same approach. It will become not thoroughly tested mess independently for greenfield and legacy projects, and added value of TDD is subtle in such case. So it’s very dependent on the discipline of the whole team which I saw in past project, let’s say in every fifth project the team was motivated and disciplined enough to have TDD be beneficial for the software.</p>
</div>
</div>
<div class="sect2">
<h3 id="_integration_testing">Integration testing.</h3>
<div class="paragraph">
<p>In later stages of software development is evident that code not driven by TDD is easier to test by integration testing instead of unit testing. So there is a tension to produce more integration tests and avoid unit testing with a clear mind. It’s because of the smaller cohesion and bigger coupling of the code not developed by TDD. The classes tend to be bigger, having a big amount of dependencies which isn’t easy to mock and test by unit tests. But with the missing unit test suite, you don’t know if the integration tests are covering all the cases. Yes, you can measure code coverage, but measuring code coverage of the integration tests is quite <a href="http://sqa.stackexchange.com/a/25007">questionable</a> - integration test calls many of the logic even when it’s not testing (<strong>and verifying</strong>) it particularly so the coverage is corrupted with such cases.</p>
</div>
</div>
<div class="sect2">
<h3 id="_isolation_of_the_components">Isolation of the components.</h3>
<div class="paragraph">
<p>If the <a href="https://leanpub.com/visualising-software-architecture/">isolation of components</a> or modules are done right, then the modules/components are small and easy to refactor, easy to enhance about comprehensive unit test suite and continue with coding with TDD style. Or is possible to replace them entirely with the newly shiny component. If not, then producing of code by TDD don’t enhance the existing codebase at all. It’s like the old saying: What become with a cask of sewage when the glass of wine pour out to it? Sewage. What becomes with a cask of wine when the glass of sewage pour out to it? Sewage.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dead_code">Dead code.</h3>
<div class="paragraph">
<p>Writing tests for dead code seems to be very useless. But find out which parts of the code are effectively dead or better said - impossible to reach in runtime, is very hard. And it’s very hard to convince anyone to a removal of such code also - there is a fear of removal code which might be useful, but we don’t have tests which are testing it and proving that it’s useful code. So does help the TDD us when we are operating on the dead code? No.</p>
</div>
</div>
<div class="sect2">
<h3 id="_not_frequently_touched_code">Not frequently touched code.</h3>
<div class="paragraph">
<p>Adding features to not frequently touched code by TDD when this code wasn’t developed by TDD is nonsense. The refactorings and testing need to come before the actual feature, and for the code which is simply working even when it’s not properly tested, it’s a waste of time. There is a need to have priority to concentrate on things which matter at most and not using any useful technique just for the reason of using it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_testing_first_approach">Testing first approach.</h3>
<div class="paragraph">
<p>TDD is replaced by "testing first" approach often (misleadingly). It means that for each bug or new feature is written one or more tests (integration tests often) which is failing and only then is bug fixed or feature implemented in production code. But, there is no refactor phase afterward, and the code isn’t improved at all. And there is no preparation phase to enhance the code before the actual feature often. So, if there is tension to use this approach on your project, then it definitely comes against using TDD.</p>
</div>
</div>
<div class="sect1">
<h2 id="_so_is_it_possible_to_use_tdd_in_a_project_with_plenty_of_legacy_code">So is it possible to use TDD in a project with plenty of legacy code?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I would like to say yes, but the reality is, no. Or better, in the long term, no. There are many preconditions and actual conditions which prevent to use TDD in a reasonable manner and with the fair amount of added value. Ok, is possible to use TDD, but I would like to say, that the benefits are questionable.</p>
</div>
<div class="paragraph">
<p>In my experience, I was facing 10-11 projects with the large codebase and a big amount of legacy code. Even when I started using TDD, tried to convince anyone in the teams that it’s a good thing, I often find out the way how to work in TDD style on a daily basis, after all, the benefits were small, and the enthusiasm and motivation were continuously decreasing. Then I moved to use TDD only for the newly developed component, and when I touched the legacy code, I have had a temptation to use test-first approach and not touch the existing code by refactoring or only in, let’s say, “low hanging fruit” scenarios.</p>
</div>
<div class="paragraph">
<p>Maybe it was my discipline which failed, but I am convinced that without a clear intention of the whole team, one doesn&#8217;t have a chance to use TDD in a reasonable manner. It must be a team decision and team discipline which brings the possibility of using TDD for everything.</p>
</div>
<div class="paragraph">
<p><strong>P.S.</strong> If you enjoyed this post, give me a favor and share this post anywhere online, as well as you can follow me on <a href="https://twitter.com/mikealdo007">twitter</a> to stay in touch with my further articles, news from software development and other thoughts.</p>
</div>
<div class="paragraph">
<p><strong>P.S.2</strong> Cover image by <a href="https://unsplash.com/collections/172064/macros?photo=Skf7HxARcoc">Markus Spiske | unsplash.com</a>.</p>
</div>
</div>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname = 'mikealdo'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2017. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>
    <script src="//mikealdo.github.io/themes/uno-zen/assets/js/uno-zen.js?v=1.0.0" type="text/javascript" charset="utf-8"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-72815761-1', 'auto');
    ga('send', 'pageview');

    </script>
  </body>
</html>
