<!DOCTYPE html>
<html>
  <head>
    <title>Comparison of methods for preparing test data for your tests</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    
    <link rel="apple-touch-icon" sizes="57x57" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-57x57.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="60x60" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-60x60.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="72x72" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-72x72.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="76x76" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-76x76.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="114x114" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-114x114.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="120x120" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-120x120.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="144x144" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-144x144.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="152x152" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-152x152.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="apple-touch-icon" sizes="180x180" href="//mikealdo.github.io/themes/uno-zen/assets/img/apple-touch-icon-180x180.png?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-32x32.png?v=wAAv6Wqe6l?v=1.0.0" sizes="32x32">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-194x194.png?v=wAAv6Wqe6l?v=1.0.0" sizes="194x194">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-96x96.png?v=wAAv6Wqe6l?v=1.0.0" sizes="96x96">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/android-chrome-192x192.png?v=wAAv6Wqe6l?v=1.0.0" sizes="192x192">
    <link rel="icon" type="image/png" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon-16x16.png?v=wAAv6Wqe6l?v=1.0.0" sizes="16x16">
    <link rel="manifest" href="//mikealdo.github.io/themes/uno-zen/assets/img/manifest.json?v=wAAv6Wqe6l?v=1.0.0">
    <link rel="shortcut icon" href="//mikealdo.github.io/themes/uno-zen/assets/img/favicon.ico?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="msapplication-TileColor" content="#e74c3c">
    <meta name="msapplication-TileImage" content="//mikealdo.github.io/themes/uno-zen/assets/img/mstile-144x144.png?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="msapplication-config" content="//mikealdo.github.io/themes/uno-zen/assets/img/browserconfig.xml?v=wAAv6Wqe6l?v=1.0.0">
    <meta name="theme-color" content="#e74c3c">
    <link rel="stylesheet" type="text/css" href="//mikealdo.github.io/themes/uno-zen/assets/css/uno-zen.css?v=1.0.0" />
    <link rel="canonical" href="https://mikealdo.github.io/2016/01/13/Comparison-of-methods-for-preparing-test-data-for-your-tests.html" />
    
    <meta property="og:site_name" content="Michal Davídek - blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Comparison of methods for preparing test data for your tests" />
    <meta property="og:description" content="Fact is that if your application cooperate with database and you are writing tests you need testing data. There are several ways how to maintain testing data which I ever seen, Each choice have some cons and pros so let&amp;..." />
    <meta property="og:url" content="https://mikealdo.github.io/2016/01/13/Comparison-of-methods-for-preparing-test-data-for-your-tests.html" />
    <meta property="og:image" content="https://mikealdo.github.io/images//covers/comparison-of-methos-for-preparing-test-data.png" />
    <meta property="article:published_time" content="2016-01-12T23:00:00.000Z" />
    <meta property="article:modified_time" content="2016-05-02T12:30:00.320Z" />
    <meta property="article:tag" content="dbunit" />
    <meta property="article:tag" content="test data" />
    <meta property="article:tag" content="testing" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Comparison of methods for preparing test data for your tests" />
    <meta name="twitter:description" content="Fact is that if your application cooperate with database and you are writing tests you need testing data. There are several ways how to maintain testing data which I ever seen, Each choice have some cons and pros so let&amp;..." />
    <meta name="twitter:url" content="https://mikealdo.github.io/2016/01/13/Comparison-of-methods-for-preparing-test-data-for-your-tests.html" />
    <meta name="twitter:image:src" content="https://mikealdo.github.io/images//covers/comparison-of-methos-for-preparing-test-data.png" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Michal Davídek - blog",
    "author": {
        "@type": "Person",
        "name": "Michal Davídek",
        "image": "https://avatars.githubusercontent.com/u/14245058?v=3",
        "url": "undefined/author/undefined",
        "sameAs": null
    },
    "headline": "Comparison of methods for preparing test data for your tests",
    "url": "https://mikealdo.github.io/2016/01/13/Comparison-of-methods-for-preparing-test-data-for-your-tests.html",
    "datePublished": "2016-01-12T23:00:00.000Z",
    "dateModified": "2016-05-02T12:30:00.320Z",
    "image": "https://mikealdo.github.io/images//covers/comparison-of-methos-for-preparing-test-data.png",
    "keywords": "dbunit,  test data,  testing",
    "description": "Fact is that if your application cooperate with database and you are writing tests you need testing data. There are several ways how to maintain testing data which I ever seen, Each choice have some cons and pros so let&amp;..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Michal Davídek - blog" href="https://mikealdo.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
  </head>
  <body class="post-template tag-dbunit tag-test-data tag-testing">
    <header id="menu-button" class="expanded">
      <a><i class="icon icon-list"></i></a>
    </header>
    <aside class="cover" style="background: url(/images/background-cover.jpg) center/cover no-repeat fixed">
      <div class="cover container">
        <div class="profile">
          <a id="avatar-link" title="link to homepage for Michal Davídek - blog" href="https://mikealdo.github.io/#open">
            <img src="/images/michal-davidek.png" alt="Michal Davídek - blog avatar" class="profile avatar rounded hvr-buzz-out" />
            <h1 id="profile-title">Michal Davídek - blog</h1>
            <h3 id="profile-resume"></h3>
          </a>
    
          <hr class="divider long" />
          <p>Architecture, coding, open source.</p>
          <hr class="divider short" />
          <div class="navigation">
            <div class="profile contact">
              
              <nav class="navigation right">
                <ul class="social expanded">
              
              
                  <!-- Twitter -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://twitter.com/mikealdo007" title="Twitter account">
                      <i class='icon icon-social-twitter'></i>
                      <span class="label">Twitter</span>
                    </a>
                  </li>
              
                  <!-- Google Plus -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://plus.google.com/+MichalDavidekCZ" title="Google+ account">
                      <i class='icon icon-social-google-plus'></i>
                      <span class="label">Google-plus</span>
                    </a>
                  </li>
              
                  <!-- Github -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://github.com/mikealdo" title="Github account">
                      <i class='icon icon-social-github'></i>
                      <span class="label">Github</span>
                    </a>
                  </li>
                  </li>
              
              
              
              
                  <!-- LinkedIn -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="https://www.linkedin.com/in/davidekmichal" title="LinkedIn account">
                      <i class='icon icon-social-linkedin'></i>
                      <span class="label">LinkedIn</span>
                    </a>
                  </li>
              
                  <!-- Email -->
                  <li class="social item hvr-grow-rotate">
                    <a rel="me" href="mailto:mdavidek1@gmail.com" title="Email mdavidek1@gmail.com">
                      <i class='icon icon-mail'></i>
                      <span class="label">Email</span>
                    </a>
                  </li>
              
                </ul>
              </nav>
              <!-- <section class="icon icon-search" id="search-container">
      <hr class="divider short" />
      <form id="search-form">
        <input type="text", name="search", placeholder="git, css, javascript,..." id="search-field" />
      </form>
    </section>
     -->
            </div>
          </div>
        </div>
      </div>
    </aside>
    <main>
      <section id="search-results"></section>
      <section class="content">
        

  <article class="post tag-dbunit tag-test-data tag-testing">
    <header>
      <div class="post meta">
        <time datetime="13 Jan 2016">13 Jan 2016</time>
        <span class="post tags">in <a href="https://mikealdo.github.io/tag/dbunit">dbunit</a> <a href="https://mikealdo.github.io/tag/test-data"> test data</a> <a href="https://mikealdo.github.io/tag/testing"> testing</a></span>


        <span class="post reading-time"> ~ <span></span> read.</span>
      </div>
      <a alt="Tweet 'Comparison of methods for preparing test data for your tests'" href="https://twitter.com/intent/tweet?text=Comparison%20of%20methods%20for%20preparing%20test%20data%20for%20your%20tests%20%C2%BB&amp;hashtags=dbunit, test data, testing&amp;url=https://mikealdo.github.io/2016/01/13/Comparison-of-methods-for-preparing-test-data-for-your-tests.html">
        <img id="post-image" src=https://mikealdo.github.io/images//covers/comparison-of-methos-for-preparing-test-data.png alt="Comparison of methods for preparing test data for your tests">
        <h1 class="icon-reverse icon-social-twitter-post" id="post-title">Comparison of methods for preparing test data for your tests</h1>
      </a>
    </header>

    <div id="post-content" class="post tag-dbunit tag-test-data tag-testing">
      <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Fact is that if your application cooperate with database and you are writing tests you need testing data. There are several ways how to maintain testing data which I ever seen, Each choice have some cons and pros so let&#8217;s compare them:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SQL scripts executed before and after test</p>
<div class="ulist">
<ul>
<li>
<p>SQL scripts have advantage that you can leverage them not only in your tests.</p>
</li>
<li>
<p>It&#8217;s easy to write for everyone who knows SQL.</p>
</li>
<li>
<p>If you have all your database code in SQL it&#8217;s probably good thing to have testing data in SQL as well to have some consistency.</p>
</li>
<li>
<p>It&#8217;s pretty hard to maintain them and it&#8217;s common that each developer is writing them in slightly different way. When you have complex data model SQL is becoming too extensive to read and if you are looking for something to fix it&#8217;s very easy to overlook something. You also need to implement your way how to run all the scripts before test and how to clean DB after your test.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Liquibase changesets</p>
<div class="ulist">
<ul>
<li>
<p>Liquibase changesets are in my mind very solid competitor with DBUnit because it&#8217;s way for writing XML&#8217;s is pretty similiar and has tool set for easy to implement your test infrastructure. It&#8217;s quite easy to write, easy to maintain and their exceptions when something goes wrong are comprehensive. It as own structure how to maintain separate files and run them alltogether or alone. One thing which is not so comfortable is that it&#8217;s quite hard to attach one particular changeset for run one particular test and it&#8217;s not directly visible from your test.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Written in programming language and persisted before test to in memory database</p>
<div class="ulist">
<ul>
<li>
<p>Other way how to have some data in DB before your test run is writing test infrasturcture in domain objects and let your persitence layer to persist them. From some complexity it&#8217;s not so scalabale because it&#8217;s leading to have either</p>
<div class="ulist">
<ul>
<li>
<p>Extensive setUp methods inside each testing class (ok, you can have inheritance in tests but <a href="http://www.petrikainulainen.net/programming/unit-testing/3-reasons-why-we-should-not-use-inheritance-in-our-tests">I am not big fan of it</a>).</p>
</li>
<li>
<p>Data set classes using some way how to reuse of data sets itself - at some point it becomes too messy due to inevitable complexity and dependencies.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Excel file</p>
<div class="ulist">
<ul>
<li>
<p>Pretty intuitive to modify, pretty difficult to set up infrastructure for it.</p>
</li>
<li>
<p>Possible hard merges in source control.</p>
</li>
<li>
<p>Nice thing about it can be that is transparent for everybody and your (maybe a less skilled) testers can maintain data as well.</p>
<div class="ulist">
<ul>
<li>
<p>It can leads to have always transparent data and possibility for breaking tests is greater than with other approaches.</p>
</li>
<li>
<p>With formatting and colors it’s most well-arranged method.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>DBUnit XML files</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://dbunit.sourceforge.net">DBUnit</a> is tool for writing (JUnit extension for Java) integration tests which are testing cooperation application with database layer. It has also quite effective way how to prepare data for your tests and has overall good tooling set.</p>
</li>
<li>
<p>DBUnit XML files are pretty easy to write.</p>
</li>
<li>
<p>It has tooling set for serialize snapshot of DB to these XML files to have starting point. After some infrastructure work is visible from each test which files are included in particular class. Disadvantage is that you need to find out way how to maintain all the files in some manner by yourself.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Creating data by API calls</p>
<div class="ulist">
<ul>
<li>
<p>If your application support API for CRUD operations above entities it’s also valid to create only empty in-memory DB before test and fill it appropriately before test by calling this API.</p>
</li>
<li>
<p>Data are not coupled with database schema and data are independent from database structure change.</p>
</li>
<li>
<p>You are working inside code so refactoring of API and test calls it’s matter of minutes with current IDE support.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each way can work. <strong>DBUnit</strong> in particular can bring visibility of dependencies, maintainable structure of testing data, common tool set for maintain and prepare data and prepared infrastucture for java integration tests. It&#8217;s easy to start with it but after some level of complexity it&#8217;s needed to work on infrastructure by ourselves. <strong>API calls</strong> are useful when you have support inside application for it and it can bring more visibility then any technic dependent of DB structure. <strong>Excel</strong> file brings value when data are shared between broad spectrum of people and not only tied to developers. <em>Which approach are you using in your project</em>?</p>
</div>
<div class="paragraph">
<p><strong>P.S.</strong> If you enjoyed reading this blog post, could you do me favor and tweet it or/and leave a comment? Thanks!</p>
</div>
</div>
</div>
    </div>

    <div class="post related">

    </div>

    <footer class="post comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname = 'mikealdo'; // required: replace example with your forum shortname
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </footer>

  </article>


        <footer>
          <span class="copyright">
            &copy; 2016. All rights reserved. Built with <a href="https://github.com/Kikobeats/uno-zen" target="_blank">Uno Zen</a> under <a href="http://hubpress.io/" target="_blank">HubPress</a>.
          </span>
        </footer>
      </section>
    </main>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>
    <script src="//mikealdo.github.io/themes/uno-zen/assets/js/uno-zen.js?v=1.0.0" type="text/javascript" charset="utf-8"></script>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-72815761-1', 'auto');
    ga('send', 'pageview');

    </script>
  </body>
</html>
